# 密码学

## 加密、解密

加密是把明文转换成密文的过程，而解密则是把密文转换成明文的过程。这个过程涉及到两个基本的工具：算法和密钥。算法通常是公开的，而密钥则是保密的。根据加密和解密时使用的密钥是否一样，可以将加密算法分为对称加密和非对称加密两类。

![](./image/cipher.png)

## 对称加密、非对称加密

1. 对称加密

加密和解密使用同一个密钥。常见的对称加密算法有DES、3DES、AES等。对称加密的缺点是通信双方必须事先商定好密钥，并且必须保证密钥的安全，而密钥交换通常并不容易。
![](./image/symmetric_cipher.png)
2. 非对称加密

加密和解密使用不同的密钥，一个称为公钥，另一个称为私钥，公钥可以提供给任何人，而私钥必须保密。公钥加密的数据只能用私钥解密，私钥加密的数据只能用公钥解密。常见的非对称加密算法有RSA、ECC（Elliptic Curve Cryptography，椭圆曲线加密算法）等。其优点是私钥无需进行交换。
![](./image/asymmetric_cipher.png)


## 消息摘要
使用一种称为哈希函数的单向、不可逆函数，将任意长度的输入转换为固定长度的输出，该输出值被称为哈希值，也叫做消息摘要。对于好的哈希算法，即使输入只有微小的变化，其产生的哈希值也会有巨大的差异。常见的哈希函数有MD5、SHA-1、SHA-256等。这里需要指出的是，计算哈希并不是加密，哈希值是不能反向解密的。

消息摘要的功能是保证数据的完整性，也就是说接收到消息后，只需对其重新计算一下哈希值，然后和接收到的哈希值进行比对，就可以判断该消息是否被篡改过。
然而，如果修改了消息并对其重新计算哈希值，那么接收方就无法验证消息的完整性，这就需要一种更安全的验证方式，即数字签名。

## 数字签名

数字签名是一种消息认证技术，它可以验证消息的完整性、真实性和发送者的身份。数字签名的过程如下：

1. 发送方计算消息的哈希值，并用私钥对哈希值进行加密，得到签名。
2. 发送方将消息和签名一起发送给接收方。
3. 接收方使用发送方的公钥对签名进行解密，得到哈希值。
4. 接收方计算消息的哈希值，并与解密后的签名进行比对。如果两者相同，则可以确定消息的完整性、真实性和发送者的身份。

## 数字证书

数字证书是一种电子凭证，它包含公钥、身份信息、有效期、颁发机构等信息。数字证书的作用是验证公钥的合法性、有效性和完整性，并提供公钥的使用者信息。数字证书的颁发机构必须受到公信力的保障，并且必须严格遵守相关法律法规。

## 密钥交换

密钥交换是指不安全的通信通道上，协商出一个双方都能理解的密钥，即使有人获取到所有的通信消息也无法推算出密钥。常见的密钥交换算法有Diffie-Hellman、ECDHE（Elliptic Curve Diffie-Hellman，椭圆曲线密钥交换算法）等。

## PEM文件
PEM（Privacy Enhanced Mail）是二进制数据的base64编码，不关心二进制数据的格式或类型，所以几乎可以包含任意base64编码的文本，并以BEGIN和END标签进行标记。
PEM文件是一种常见的证书格式，它包含证书、公钥、私钥等信息。PEM文件以-----BEGIN CERTIFICATE-----开头，以-----END CERTIFICATE-----结尾。PEM文件可以用文本编辑器打开，也可以用openssl命令行工具查看。
## DER文件
DER（Distinguished Encoding Rules）文件以二进制格式创建和存储，它是X.509证书和私钥的二进制编码。和PEM文件不同，DER文件不包含人类可读的文本，如BEGIN PRIVATE KEY和END PRIVATE KEY标签。
DER是二进制数据的ASN.1编码，它严格遵守ASN.1语法，所以可以保证编码的可读性。DER文件是一种常见的证书格式，它包含证书、公钥、私钥等信息。DER文件以3082开头，以300D结尾。DER文件可以用文本编辑器打开，也可以用openssl命令行工具查看。